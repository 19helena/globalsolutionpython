#Imports
import time
import os
from datetime import datetime

#lista de usuários cadastrados
usuarios =[{'Username':'sarinha','Nome':'sara','email':'sarinha@gmail.com','Endereco':'socorro','Senha':'12345'}]
doadores =[{'NomeUsuario':'anaa','Nome':'ana','email':'aninha@gmail.com','Endereco':'jurubatuba',
            'CPF':'1326523','Senha':'123'}]

# Função para exibir a mensagem de apresentação
def apresentacao():
    print("Olá seja bem-vindo a campanha combate á fome!")
    print("Você possui um cadastro em nossa organização")

# Função para exibir o cabeçalho e direcionar para as opções disponíveis
def cabecalho():
    print("Olá, por favor, selecione uma opção para começar o atendimento")
    print("(V) - verificar como receber uma doação")
    print("(D) - Realizar uma doação")
    print("(S) - Solicitar a realização de uma entrega")
    opcao= input("R:").upper()[0]
    if opcao =="V":
        agendamento()
    elif opcao =="D":
        doacao()
    elif opcao == "S":
        entrega()

# Função para realizar o cadastro de um colaborador (possível doador)
def cadastroColaborador():
    username = input("Informe um nome de usuário: ")
    nome = input("Informe seu nome: ")
    email = input("Informe seu email: ")
    endereco =input("Informe seu endereço: ")
    senha= input("Insira uma senha: ")
    user={'Username':username,'Nome':nome,'email':email,'Endereco':endereco,'Senha':senha}
    doadores.append(user)
    print('Cadastro realizado com sucesso!')
    time.sleep(1)
    return user

# Função para realizar o cadastro de um doador
def cadastro():
    username = input("Informe um nome de usuário: ")
    nome = input("Informe seu nome: ")
    email = input("Informe seu email: ")
    endereco =input("Informe seu endereço: ")
    senha= input("Insira uma senha: ")
    user={'Username':username,'Nome':nome,'email':email,'Endereco':endereco,'Senha':senha}
    usuarios.append(user)
    print('Cadastro realizado com sucesso!')
    time.sleep(1)
    return user

# Função para realizar o login de um usuário
def  login():
    usname =input("Por favor informe seu nome de usuário: ")
    snh = input("Insira sua senha: ")
    for x in usuarios:
        if x['email'] == usname:
            if x['Senha'] == snh:
                    print("Login realizado com sucesso!")
                    time.sleep(1)
                    os.system('cls')
                    cabecalho()
        elif x['Username'] == usname:
            if x['Senha'] == snh:
                print("Login realizado com sucesso!")
                time.sleep(1)
                os.system('cls')
                cabecalho()
        else:
            time.sleep(0.9)
            print("Senha ou nome de usuário incorretos!")
            os.system('cls')

# Função para realizar o login de um doador
def  loginDoador():
    usname =input("Por favor informe seu nome de usuário: ")
    snh = input("Insira sua senha: ")
    for x in doadores:
        if x['email'] == usname:
            if x['Senha'] == snh:
                    print("Login realizado com sucesso!")
                    time.sleep(1)
                    os.system('cls')
                    doacao()
        elif x['NomeUsuario'] == usname:
            if x['Senha'] == snh:
                    print("Login realizado com sucesso!")
                    print("Agradeço imensamente pela sua doação, pois você está contribuindo para fazer do mundo um lugar melhor!!")
                    print("Informamos que iremos encerrar o programa e, mais uma vez, agradecemos pela sua doação.!!")
                    time.sleep(1)
                    os.system('cls')
                    doacao()
        else:
            print("Os dados de acesso fornecidos estão incorretos!")
        time.sleep(0.8)
        os.system('cls')

# Função para agendar uma entrega de doações de alimento
def agendamento():
    print("Agendamento: \n")
    print("Para evitar imprevistos ou cancelamentos, por favor, gentilmente nos forneça uma data em que você esteja disponível: ")
    agData = input("R:")
    print("Ok, de acordo com o nosso sistema, nesta data teremos 2 instituições disponíveis da campanha combate á fome próximas a você: ")
    print("(1) - Santo Amaro")
    print("(2) - Primavera Interlagos")

    op= input("Selecione a opção que mais se adequar a você: ")[0]
    if op =='1':
        print("Aqui estão os horários disponíveis da instituição de Santo Amaro: ")
        print("Das 9:00 hrs às 16:00")
        print("Ou das 16:00 hrs às 21:00")
        time.sleep(4)
        os.system('cls')
    elif op == '2':
        print("Aqui estão os horários disponíveis da instituição de Primavera Interlagos: ")
        print("Das 9:00 hrs às 16:00")
        print("Ou das 17:00 hrs às 22:00")
        time.sleep(4)
        os.system('cls')

# Função para realizar uma doação de dinheiro 
def doacao():
    print("Por favor, indique quais opções de doação você prefere: ")
    print("(1) - Pix ")
    print("(2) - Transferência bancária ")
    print("(3) - Boleto ")
    op = input()
    if op == '1':
        valor_doacao = input("Por favor, indique o montante que deseja doar: R$")
        print('Você gostaria de criar um QR Code?')
        confirmacao= input().upper()
        if confirmacao == 'S':
            for j in range(0, 5):
                for i in range(0, 5):
                    print('*', end="")
                print()
            time.sleep(6)
            os.system('cls')
            print("Doação de R$", valor_doacao, "realizada com sucesso!")
            print("Agradecemos sinceramente pela sua colaboração em apoiar a nossa causa")
            time.sleep(2.5)
            os.system('cls')
        elif confirmacao == 'N':
            print("Chave Pix: 360720")
            time.sleep(3)
            os.system('cls')
            print("Doação de R$", valor_doacao, "realizada com sucesso!")
            print("Agradecemos sinceramente pela sua colaboração em apoiar a nossa causa")
            time.sleep(2.5)
            os.system('cls')
    elif op =='2':
        valor_doacao = input("Por favor, indique o montante que deseja doar: R$ ")
        print("Agência: 150 Conta: 820130")
        time.sleep(3)
        os.system('cls')
        print("Doação de R$", valor_doacao, "realizada com sucesso!")
        print("Agradecemos sinceramente pela sua colaboração em apoiar a nossa causa")
        time.sleep(2.5)
        os.system('cls')
    elif op =='3':
        valor_doacao = input("Por favor, indique o montante que deseja doar: R$ ")
        os.system('cls')
        for j in range(0, 8):
                for i in range(0, 36):
                    print('*', end="")
                print()
        print("12346788945")
        print("| || |"*6)
        time.sleep(3)
        os.system('cls')
        print("Doação de R$", valor_doacao, "realizada com sucesso!")
        print("Agradecemos sinceramente pela sua colaboração em apoiar a nossa causa")
        time.sleep(2.5)
        os.system('cls')

# Função para solicitar a realização de uma entrega
def entrega():
    print("Por favor, forneça-nos um endereço ou indique a região onde gostaria que a entrega fosse realizada:")
    entregaData = input("R:")
    print("Conforme o nosso sistema, identificamos que nesta região há 2 instituições disponíveis para você realizar a retirada de doações da campanha de combate à fome, que estão localizadas próximas a você: ")
    print("(1) - Berrini")
    print("(2) - Morumbi")
    opc= input("Selecione a opção que mais se adequa a você: ")[0]
    if opc == '1':
        print("Aqui estão os horários disponíveis no Instituto da Berrini: ")
        print("Das 9:00 hrs às 16:00")
        print("Ou das 17:00 hrs às 22:00")
        time.sleep(4)
        os.system('cls')
    elif opc == '2':
        print("Aqui estão os horários disponíveis no Instituto do Morumbi: ")
        print("Das 9:00 hrs às 16:00")
        print("Ou das 17:00 hrs às 22:00")
        time.sleep(4)
        os.system('cls')


while True:
    apresentacao()
    escolha = input("(S) sim  ou (N) não:").upper()[0]
    if escolha == 'S':
        print('Quem é você:')
        print('(C) - Colaborador (Possível Doador)')
        print('(D) - Donatário (pessoa que recebe a doação)')
        oplogin = input("R:").upper()[0]
        if oplogin == 'C':
            print('Realize o login para iniciar o atendimento')
            loginDoador()

        if oplogin =='D':
            login()
    elif escolha == 'N':
        print('Quem é você:')
        print('(C) - Colaborador (Possível Doador)')
        print('(D) - Donatário (pessoa que recebe a doação)')
        oplogin = input("R:").upper()[0]
        if oplogin == 'C':
            cadastroColaborador()

        if oplogin =='D':
            cadastro()
    else:
        print("Opção inválida!")
            
        if oplogin =='D':
            cadastro()
            
        print("deseja realizar o login? ")
        escolhalog = input("R: ").upper()[0]
        if escolhalog =='S':
            print('Quem é você:')
            print('(C) - Colaborador(Possivel Doador)')
            print('(D) - Donatário (pessoa que recebe a doação)')
            oplogin = input("R:").upper()[0]
            if oplogin == 'C':
                print('Realize o login para iniciar o atendimento')
                loginDoador()
            
            if oplogin =='D':
                login()     
        
